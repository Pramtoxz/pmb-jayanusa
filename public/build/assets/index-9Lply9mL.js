import{r as g,j as e,L as T,S as c}from"./app-DGAr4PFq.js";import{A as F,D as R,a as D,b as V,c as I,d as m,e as _}from"./app-layout-Ch-NYyH-.js";import{B as u}from"./button-Bd47zRZY.js";import{T as A,a as E,b as x,c as B,d as L,e as w}from"./table-BNpAaqbT.js";import{I as $}from"./input-CVZrchEx.js";import{u as H,f as b,P as Y,a as q,b as h,c as z,d as G,e as U,g as J,h as O,i as Q,j as W,E as X}from"./pagination-CwVgMNwS.js";import{S as f,a as y,b as k,c as C,d as i}from"./select-dZ2katOz.js";import{T as Z,t as N}from"./sonner-KUMht4I8.js";import{c as P}from"./utils-DXBu7wvP.js";import{A as S}from"./arrow-up-down-Gb3FmnQP.js";import{E as ee}from"./eye-d-jUgGSl.js";import{P as ae}from"./pencil-BGDItjB6.js";import"./index-BU-ardZR.js";import"./index-CXP7GwvV.js";import"./index-CilWc_OY.js";import"./index-Rffq3QrG.js";import"./index-B7qOPLC7.js";import"./index-8UmhVcWN.js";import"./index-BPJxSoys.js";import"./avatar-DFzZ65NU.js";import"./log-out-Wu5PisLG.js";import"./jayanusa-DK0lkaAg.js";import"./chevron-left-bDDMGMcz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],te=P("CirclePlus",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],le=P("Trash",re),ne=[{title:"Calon Mahasiswa",href:"/calon-mahasiswa"}],ie=a=>{switch(a){case"dibayar":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"menunggu":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"ditolak":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},oe=(a,t)=>a==="iya"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t==="reguler"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",v=[{accessorKey:"nik",header:({column:a})=>e.jsxs(u,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["NIK",e.jsx(S,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"nama",header:({column:a})=>e.jsxs(u,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Nama",e.jsx(S,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"program_studi",header:"Program Studi"},{accessorKey:"kelas",header:"Kelas",filterFn:(a,t,n)=>!n||n==="all"?!0:n==="beasiswa"?a.original.beasiswa==="iya":a.original.kelas===n,cell:({row:a})=>{const t=a.original;let n="";return t.beasiswa==="iya"?n="KIP-Kuliah":n=t.kelas==="reguler"?"Reguler":"Kelas Kerja",e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${oe(t.beasiswa,t.kelas)}`,children:n})}},{accessorKey:"status_pembayaran",header:"Status",cell:({row:a})=>{const t=a.getValue("status_pembayaran");return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ie(t)}`,children:t})}},{accessorKey:"suratlulus",header:"Surat Lulus",cell:({row:a})=>{const t=a.getValue("suratlulus");return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:t?"Tersedia":"Belum Ada"})}},{accessorKey:"created_at",header:"Tanggal Daftar",filterFn:(a,t,n)=>n?new Date(a.getValue(t)).getFullYear().toString()===n:!0},{id:"actions",cell:({row:a})=>{const t=a.original,n=()=>{confirm("Apakah anda yakin ingin menghapus data ini?")&&c.delete(`/calon-mahasiswa/${t.id}`,{onSuccess:()=>{N.success("Data berhasil dihapus")},onError:()=>{N.error("Gagal menghapus data")}})},o=()=>{c.get(`/calon-mahasiswa/${t.id}/edit`)};return e.jsxs(R,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(u,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Buka menu"}),e.jsx(X,{className:"h-4 w-4"})]})}),e.jsxs(V,{align:"end",children:[e.jsx(I,{children:"Aksi"}),e.jsxs(m,{onClick:()=>c.get(`/calon-mahasiswa/${t.id}`),children:[e.jsx(ee,{className:"mr-2 h-4 w-4 text-blue-600"}),"Lihat Detail"]}),e.jsxs(m,{onClick:()=>o(),children:[e.jsx(ae,{className:"mr-2 h-4 w-4 text-yellow-600"}),"Edit"]}),e.jsx(_,{}),e.jsxs(m,{onClick:()=>n(),className:"text-red-600",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})}}];function Re({calonMahasiswa:a}){var p,j;const[t,n]=g.useState([]),[o,M]=g.useState([]),K=g.useMemo(()=>{const l=a.map(s=>new Date(s.created_at).getFullYear());return Array.from(new Set(l)).sort((s,d)=>d-s)},[a]),r=H({data:a,columns:v,getCoreRowModel:W(),getPaginationRowModel:Q(),onSortingChange:n,onColumnFiltersChange:M,getFilteredRowModel:O(),getSortedRowModel:J(),initialState:{pagination:{pageSize:10}},state:{sorting:t,columnFilters:o}});return e.jsxs(F,{breadcrumbs:ne,children:[e.jsx(T,{title:"Calon Mahasiswa"}),e.jsx(Z,{}),e.jsxs("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Daftar Calon Mahasiswa"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola data calon mahasiswa baru di sini"})]}),e.jsxs(u,{onClick:()=>c.get("/calon-mahasiswa/create"),children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Tambah Baru"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{placeholder:"Cari berdasarkan nama...",value:((p=r.getColumn("nama"))==null?void 0:p.getFilterValue())??"",onChange:l=>{var s;return(s=r.getColumn("nama"))==null?void 0:s.setFilterValue(l.target.value)},className:"max-w-sm"}),e.jsxs(f,{onValueChange:l=>{var s,d;l==="all"?(s=r.getColumn("created_at"))==null||s.setFilterValue(""):(d=r.getColumn("created_at"))==null||d.setFilterValue(l)},children:[e.jsx(y,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Filter Tahun"})}),e.jsxs(C,{children:[e.jsx(i,{value:"all",children:"Semua Tahun"}),K.map(l=>e.jsxs(i,{value:l.toString(),children:["Tahun ",l]},l))]})]}),e.jsxs(f,{onValueChange:l=>{var s;(s=r.getColumn("kelas"))==null||s.setFilterValue(l)},children:[e.jsx(y,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Filter Kelas"})}),e.jsxs(C,{children:[e.jsx(i,{value:"all",children:"Semua Kelas"}),e.jsx(i,{value:"reguler",children:"Reguler"}),e.jsx(i,{value:"kerja",children:"Kelas Kerja"}),e.jsx(i,{value:"beasiswa",children:"KIP-Kuliah"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.getFilteredRowModel().rows.length," data ditemukan"]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(E,{children:r.getHeaderGroups().map(l=>e.jsx(x,{children:l.headers.map(s=>e.jsx(B,{children:s.isPlaceholder?null:b(s.column.columnDef.header,s.getContext())},s.id))},l.id))}),e.jsx(L,{children:(j=r.getRowModel().rows)!=null&&j.length?r.getRowModel().rows.map(l=>e.jsx(x,{children:l.getVisibleCells().map(s=>e.jsx(w,{children:b(s.column.columnDef.cell,s.getContext())},s.id))},l.id)):e.jsx(x,{children:e.jsx(w,{colSpan:v.length,className:"h-24 text-center",children:"Tidak ada data"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.getFilteredRowModel().rows.length," data ditemukan"]}),e.jsx(Y,{children:e.jsxs(q,{children:[e.jsx(h,{children:e.jsx(z,{onClick:()=>r.previousPage(),className:r.getCanPreviousPage()?"cursor-pointer":"pointer-events-none opacity-50","aria-disabled":!r.getCanPreviousPage()})}),Array.from({length:r.getPageCount()},(l,s)=>e.jsx(h,{children:e.jsx(G,{onClick:()=>r.setPageIndex(s),isActive:r.getState().pagination.pageIndex===s,children:s+1})},s)),e.jsx(h,{children:e.jsx(U,{onClick:()=>r.nextPage(),className:r.getCanNextPage()?"cursor-pointer":"pointer-events-none opacity-50","aria-disabled":!r.getCanNextPage()})})]})})]})]})]})}export{Re as default};
