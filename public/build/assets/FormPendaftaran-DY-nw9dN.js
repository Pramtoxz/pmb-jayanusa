import{r as g,j as e,S as k}from"./app-DnymW8wr.js";import{L as n}from"./label-arjF9kf-.js";import{I as r}from"./input-BYYIiTuI.js";import{B as N}from"./button-B2Rzikt1.js";import{S as j}from"./sweetalert2.esm.all-B0Dix5B2.js";import{S as m,a as h,b as u,c as x,d as i}from"./select-C5mons2W.js";import{L}from"./jayanusa-DK0lkaAg.js";import{P as F,C as I}from"./indonesia-D4BytANq.js";import{a as y}from"./utils-DfMvvvIU.js";import"./index-DJUGPmWW.js";import"./index-uiLhbe68.js";import"./index-CYsu8eN4.js";function O({initialData:b,pembayaran:f}){const[l,o]=g.useState(b||{nik:"",nama:"",alamat:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"L",kota:"",kecamatan:"",kelurahan:"",provinsi:"",agama:"",no_hp:"",asal_sekolah:"",tahun_lulus:"",program_studi:"",foto:null,fotoPreview:null,beasiswa:"",kelas:""}),[v]=g.useState(!1),[w,_]=g.useState([]),p=(f==null?void 0:f.status)==="dibayar",d=a=>{const{name:s,value:t}=a.target;if(s==="nik"||s==="no_hp"||s==="tahun_lulus"){const c=t.replace(/[^0-9]/g,"");o(K=>({...K,[s]:c}))}else o(c=>({...c,[s]:t}))},C=async a=>{if(a.preventDefault(),l.nik.length!==16){j.fire({icon:"warning",title:"NIK Belum Lengkap!",text:"Pastikan NIK terdiri dari 16 angka",confirmButtonColor:"#3085d6",confirmButtonText:"Mengerti",showClass:{popup:"animate__animated animate__fadeInDown"}});return}const s=new FormData;Object.entries(l).forEach(([t,c])=>{t!=="foto"&&t!=="fotoPreview"&&c!==null&&s.append(t,c)}),l.foto instanceof File&&s.append("foto",l.foto),k.post("/pendaftaran",s,{onSuccess:()=>{j.fire({icon:"success",title:"Pendaftaran Berhasil",text:"Untuk Tahapan Selanjutnya Silahkan Lakukan Pembayaran",confirmButtonColor:"#3085d6"}).then(()=>{k.visit("/siswa/pembayaran")})},onError:t=>{t.nik&&(typeof t.nik=="string"&&t.nik.toLowerCase().includes("terdaftar")||Array.isArray(t.nik)&&t.nik.some(c=>c.toLowerCase().includes("terdaftar")))?j.fire({icon:"warning",title:"NIK Sudah Terdaftar!",text:"NIK yang Anda masukkan sudah terdaftar dalam sistem",confirmButtonColor:"#d33",confirmButtonText:"Tutup",showClass:{popup:"animate__animated animate__shakeX"}}):j.fire({icon:"info",title:"Data Belum Lengkap!",text:"Silakan lengkapi seluruh data yang diperlukan",confirmButtonColor:"#3085d6",confirmButtonText:"Mengerti",showClass:{popup:"animate__animated animate__fadeInDown"}})}})},S=a=>{if(a.target.files&&a.target.files[0]){const s=a.target.files[0];o(t=>({...t,foto:s,fotoPreview:URL.createObjectURL(s)}))}},P=a=>{o(s=>({...s,provinsi:a,kota:""})),_(I[a]||[])};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{src:L,alt:"Logo STMIK Jayanusa",className:"h-12 sm:h-16 w-auto"}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-center text-[#02188B]",children:"STMIK-AMIK JAYANUSA"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center",children:"Formulir Pendaftaran Mahasiswa Baru"})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Data Pribadi"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Silakan lengkapi data pribadi Anda dengan benar"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsxs("div",{className:"space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"nik",className:"font-medium",children:["NIK ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(r,{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"nik",name:"nik",value:l.nik,onChange:d,maxLength:16,placeholder:"Masukkan NIK (16 digit)",className:"transition-colors duration-200 focus:border-primary"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:"Format: 16 digit angka"}),e.jsxs("p",{className:"text-muted-foreground",children:[l.nik.length,"/16"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"nama",className:"font-medium",children:["Nama Lengkap ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(r,{type:"text",id:"nama",name:"nama",value:l.nama,onChange:d,placeholder:"Masukkan nama lengkap",className:"transition-colors duration-200 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"jenis_kelamin",className:"font-medium",children:["Jenis Kelamin ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{name:"jenis_kelamin",value:l.jenis_kelamin,onValueChange:a=>o(s=>({...s,jenis_kelamin:a})),children:[e.jsx(h,{className:"transition-colors duration-200 focus:border-primary",children:e.jsx(u,{placeholder:"Pilih Jenis Kelamin"})}),e.jsxs(x,{children:[e.jsx(i,{value:"L",children:"Laki-laki"}),e.jsx(i,{value:"P",children:"Perempuan"})]})]})]})]}),e.jsxs("div",{className:"w-full sm:w-1/3 space-y-2",children:[e.jsx(n,{htmlFor:"foto",className:"italic font-medium",children:"Foto 3x4"}),e.jsxs("div",{className:"relative flex flex-col items-center p-4 border-2 border-dashed rounded-lg",children:[l.fotoPreview?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:l.fotoPreview,alt:"Preview",className:"w-full h-[200px] object-cover rounded-lg shadow-sm"}),e.jsxs(N,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var a;return(a=document.getElementById("foto"))==null?void 0:a.click()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Ganti Foto"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-[200px] bg-muted/30 rounded-lg",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mb-2 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Belum ada foto"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: JPG, PNG (Max. 2MB)"})]}),e.jsxs(N,{type:"button",variant:"secondary",className:"w-full",onClick:()=>{var a;return(a=document.getElementById("foto"))==null?void 0:a.click()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Foto"]})]}),e.jsx(r,{type:"file",id:"foto",name:"foto",onChange:S,accept:"image/*",className:"hidden"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"tempat_lahir",className:"font-medium",children:["Tempat Lahir ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(r,{type:"text",id:"tempat_lahir",name:"tempat_lahir",value:l.tempat_lahir,onChange:d,placeholder:"Masukkan tempat lahir",className:"transition-colors duration-200 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"tanggal_lahir",className:"font-medium",children:["Tanggal Lahir ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(r,{type:"date",id:"tanggal_lahir",name:"tanggal_lahir",value:l.tanggal_lahir,onChange:d,className:"transition-colors duration-200 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"alamat",className:"font-medium",children:["Alamat Lengkap ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(r,{type:"text",id:"alamat",name:"alamat",value:l.alamat,onChange:d,placeholder:"Masukkan alamat lengkap",className:"transition-colors duration-200 focus:border-primary"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"provinsi",className:"font-medium",children:"Provinsi"}),e.jsxs(m,{name:"provinsi",value:l.provinsi,onValueChange:P,children:[e.jsx(h,{className:"transition-colors duration-200 focus:border-primary",children:e.jsx(u,{placeholder:"Pilih Provinsi"})}),e.jsx(x,{children:F.map(a=>e.jsx(i,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"kota",className:"font-medium",children:"Kota/Kabupaten"}),e.jsxs(m,{name:"kota",value:l.kota,onValueChange:a=>o(s=>({...s,kota:a})),disabled:!l.provinsi,children:[e.jsx(h,{className:"transition-colors duration-200 focus:border-primary",children:e.jsx(u,{placeholder:"Pilih Kota/Kabupaten"})}),e.jsx(x,{children:w.map(a=>e.jsx(i,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"kecamatan",className:"font-medium",children:"Kecamatan"}),e.jsx(r,{type:"text",id:"kecamatan",name:"kecamatan",value:l.kecamatan,onChange:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"kelurahan",className:"font-medium",children:"Kelurahan"}),e.jsx(r,{type:"text",id:"kelurahan",name:"kelurahan",value:l.kelurahan,onChange:d})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"agama",className:"font-medium",children:"Agama"}),e.jsxs(m,{name:"agama",value:l.agama,onValueChange:a=>o(s=>({...s,agama:a})),children:[e.jsx(h,{className:"transition-colors duration-200 focus:border-primary",children:e.jsx(u,{placeholder:"Pilih Agama"})}),e.jsxs(x,{children:[e.jsx(i,{value:"Islam",children:"Islam"}),e.jsx(i,{value:"Kristen",children:"Kristen"}),e.jsx(i,{value:"Katolik",children:"Katolik"}),e.jsx(i,{value:"Hindu",children:"Hindu"}),e.jsx(i,{value:"Buddha",children:"Buddha"}),e.jsx(i,{value:"Konghucu",children:"Konghucu"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"no_hp",className:"font-medium",children:"Nomor HP"}),e.jsx(r,{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"no_hp",name:"no_hp",value:l.no_hp,onChange:d,placeholder:"Masukkan nomor HP",className:"transition-colors duration-200 focus:border-primary"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Data Pendidikan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Informasi mengenai riwayat pendidikan Anda"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"asal_sekolah",className:"font-medium",children:"Asal Sekolah"}),e.jsx(r,{type:"text",id:"asal_sekolah",name:"asal_sekolah",value:l.asal_sekolah,onChange:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"tahun_lulus",className:"font-medium",children:"Tahun Lulus"}),e.jsx(r,{type:"text",inputMode:"numeric",pattern:"[0-9]*",id:"tahun_lulus",name:"tahun_lulus",value:l.tahun_lulus,onChange:d,maxLength:4,placeholder:"Masukkan tahun lulus",className:"transition-colors duration-200 focus:border-primary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"program_studi",className:"font-medium",children:"Program Studi Pilihan"}),e.jsxs(m,{name:"program_studi",value:l.program_studi,onValueChange:a=>o(s=>({...s,program_studi:a})),children:[e.jsx(h,{className:"transition-colors duration-200 focus:border-primary",children:e.jsx(u,{placeholder:"Pilih Program Studi"})}),e.jsxs(x,{children:[e.jsx(i,{value:"MI",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"D3-Manajemen Informatika"})})}),e.jsx(i,{value:"SI",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"S1-Sistem Informasi"})})}),e.jsx(i,{value:"SK",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"S1-Sistem Komputer"})})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"beasiswa",className:"font-medium",children:"Beasiswa"}),e.jsxs(m,{name:"beasiswa",value:l.beasiswa,onValueChange:a=>o(s=>({...s,beasiswa:a,kelas:a==="iya"?"reguler":s.kelas})),disabled:p,children:[e.jsx(h,{className:y("transition-colors duration-200 focus:border-primary",p&&"opacity-50 cursor-not-allowed"),children:e.jsx(u,{placeholder:"Penerima Beasiswa KIP-Kuliah (Isi Tidak Jika Tidak Penerima)"})}),e.jsxs(x,{children:[e.jsx(i,{value:"iya",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Ya (KIP-Kuliah)"})})}),e.jsx(i,{value:"tidak",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Tidak"})})})]})]}),p&&e.jsx("p",{className:"text-xs text-yellow-600",children:"*Beasiswa tidak dapat diubah karena pembayaran telah diverifikasi"})]}),l.beasiswa==="tidak"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"kelas",className:"font-medium",children:"Kelas"}),e.jsxs(m,{name:"kelas",value:l.kelas,onValueChange:a=>o(s=>({...s,kelas:a})),disabled:p,children:[e.jsx(h,{className:y("transition-colors duration-200 focus:border-primary",p&&"opacity-50 cursor-not-allowed"),children:e.jsx(u,{placeholder:"Pilih Kelas"})}),e.jsxs(x,{children:[e.jsx(i,{value:"reguler",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Non Kerja"})})}),e.jsx(i,{value:"kerja",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"Kerja"})})})]})]}),p&&e.jsx("p",{className:"text-xs text-yellow-600",children:"*Kelas tidak dapat diubah karena pembayaran telah diverifikasi"})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx(N,{type:"submit",disabled:v,className:"w-full sm:w-auto min-w-[200px] transition-all duration-200 hover:scale-[1.02]",children:v?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Menyimpan..."})]}):"Simpan Data"})})]})})})]})}export{O as default};
