import{K as F,r,j as e,L as B,S as M}from"./app-BPZU6kKY.js";import{A as H}from"./app-layout-DOaYpm7x.js";import{C as R,a as V,b as O,c as q}from"./card-yrC3bi-J.js";import{T as U,a as $,b as v,c as t,d as z,e as l}from"./table-B4IYY0Rc.js";import{B as y}from"./button-DApcAPKW.js";import{I as k}from"./input-BNuhkTGN.js";import{L as h}from"./label-CGAI1CiB.js";import{S as N,a as C,b as T,c as _,d as n}from"./select-B2h0uenC.js";import{A as j}from"./arrow-up-down-Bbi6AU_T.js";import"./utils-BQ9Nw898.js";import"./index-BGVLTc_-.js";import"./index-Cr9yJDPs.js";import"./index-FWwau2jL.js";import"./index-CaSkKnKo.js";import"./index-Bd8T_iJP.js";import"./index-DWpwa6Kf.js";import"./index-DM0dr4su.js";import"./avatar-CJOGywlZ.js";import"./log-out-DVBK5gjb.js";import"./jayanusa-DK0lkaAg.js";const G=[{title:"Laporan Siswa",href:"/laporan/siswa"}],J=s=>{switch(s){case"dibayar":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"menunggu":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"belum ada":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}};function pe(){const{flash:s,siswa:c}=F().props,[i,A]=r.useState(""),[d,L]=r.useState(""),[x,P]=r.useState("all"),[u,I]=r.useState("all"),[p,g]=r.useState(!1),[f,S]=r.useState([]);r.useEffect(()=>{var a;c&&Array.isArray(c)&&S(c),(a=s==null?void 0:s.data)!=null&&a.siswa&&S(s.data.siswa)},[s,c]);const K=a=>{if(a.preventDefault(),!i||!d){alert("Mohon isi tanggal awal dan akhir");return}g(!0),M.post("/laporan/siswa",{tanggal_awal:i,tanggal_akhir:d,kelas:x,program_studi:u},{preserveState:!0,preserveScroll:!0,onSuccess:()=>g(!1),onError:()=>g(!1)})},D=()=>{var w;if(!i||!d){alert("Mohon isi tanggal awal dan akhir");return}const a=document.createElement("form");a.method="POST",a.action="/laporan/siswa/download-pdf";const b=(w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content");if(b){const o=document.createElement("input");o.type="hidden",o.name="_token",o.value=b,a.appendChild(o)}for(const[o,E]of Object.entries({tanggal_awal:i,tanggal_akhir:d,kelas:x,program_studi:u})){const m=document.createElement("input");m.type="hidden",m.name=o,m.value=E,a.appendChild(m)}document.body.appendChild(a),a.submit(),document.body.removeChild(a)};return e.jsxs(H,{breadcrumbs:G,children:[e.jsx(B,{title:"Laporan Siswa"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Laporan Siswa"}),e.jsx("p",{className:"text-muted-foreground",children:"Lihat laporan detail siswa berdasarkan periode"})]})}),e.jsxs(R,{children:[e.jsx(V,{children:e.jsx(O,{children:"Filter Laporan"})}),e.jsx(q,{children:e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"tanggal_awal",children:"Tanggal Awal"}),e.jsx(k,{type:"date",id:"tanggal_awal",value:i,onChange:a=>A(a.target.value),max:d||void 0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"tanggal_akhir",children:"Tanggal Akhir"}),e.jsx(k,{type:"date",id:"tanggal_akhir",value:d,onChange:a=>L(a.target.value),min:i||void 0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"kelas",children:"Kelas"}),e.jsxs(N,{value:x,onValueChange:P,children:[e.jsx(C,{children:e.jsx(T,{placeholder:"Pilih Kelas"})}),e.jsxs(_,{children:[e.jsx(n,{value:"all",children:"Semua Kelas"}),e.jsx(n,{value:"reguler",children:"Reguler"}),e.jsx(n,{value:"kerja",children:"Kerja"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"program_studi",children:"Program Studi"}),e.jsxs(N,{value:u,onValueChange:I,children:[e.jsx(C,{children:e.jsx(T,{placeholder:"Pilih Program Studi"})}),e.jsxs(_,{children:[e.jsx(n,{value:"all",children:"Semua Program Studi"}),e.jsx(n,{value:"MI",children:"D3-Manajemen Informatika"}),e.jsx(n,{value:"SI",children:"S1-Sistem Informasi"}),e.jsx(n,{value:"SK",children:"S1-Sistem Komputer"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{type:"submit",disabled:p,children:p?"Memuat...":"Tampilkan Laporan"}),e.jsx(y,{type:"button",variant:"outline",onClick:D,disabled:p,children:"Download PDF"})]})]})})]}),f.length>0&&e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden shadow-sm",children:e.jsxs(U,{children:[e.jsx($,{children:e.jsxs(v,{children:[e.jsx(t,{className:"cursor-pointer hover:text-primary transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"NIK"}),e.jsx(j,{className:"h-4 w-4"})]})}),e.jsx(t,{className:"cursor-pointer hover:text-primary transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Nama"}),e.jsx(j,{className:"h-4 w-4"})]})}),e.jsx(t,{children:"Program Studi"}),e.jsx(t,{children:"Kelas"}),e.jsx(t,{children:"Beasiswa"}),e.jsx(t,{children:"Status Pembayaran"}),e.jsx(t,{className:"cursor-pointer hover:text-primary transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Tanggal Daftar"}),e.jsx(j,{className:"h-4 w-4"})]})})]})}),e.jsx(z,{children:f.map(a=>e.jsxs(v,{children:[e.jsx(l,{children:a.nik}),e.jsx(l,{children:a.nama}),e.jsx(l,{children:a.program_studi}),e.jsx(l,{children:a.kelas}),e.jsx(l,{children:a.beasiswa}),e.jsx(l,{children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${J(a.status_pembayaran)}`,children:a.status_pembayaran})}),e.jsx(l,{children:a.tanggal_daftar})]},a.nik))})]})})]})]})}export{pe as default};
