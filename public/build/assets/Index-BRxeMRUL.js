import{r as l,j as e,L as k,S as o}from"./app-DnymW8wr.js";import{A as P,D as T,a as R,b as M,c as D,d as h}from"./app-layout-BMcKJ6rY.js";import{B as i}from"./button-B2Rzikt1.js";import{T as K,a as I,b as m,c as E,d as A,e as p}from"./table-C3u9XbbL.js";import{I as L}from"./input-BYYIiTuI.js";import{u as B,f as j,P as F,a as U,b as g,c as H,d as V,e as $,g as _,h as z,i as q,j as G,E as J}from"./pagination-Dj9eZTWU.js";import{T as O}from"./sonner-iiSsZPZJ.js";import{S as Q}from"./search-BgItGKXQ.js";import{A as f}from"./arrow-up-down-BQhCmwBf.js";import{E as W}from"./eye-g81ce2zh.js";import{P as X}from"./pencil-CpXfcoqG.js";import"./utils-DfMvvvIU.js";import"./index-fjz_OlXp.js";import"./index-uiLhbe68.js";import"./index-DJUGPmWW.js";import"./index-CYsu8eN4.js";import"./avatar-CG7Xbu_S.js";import"./log-out-BskkBsrY.js";import"./jayanusa-DK0lkaAg.js";import"./chevron-left-B3U8vqVV.js";const Y=[{title:"Kelola User",href:"/users"}],Z=t=>{switch(t){case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"user":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},b=[{accessorKey:"nik",header:({column:t})=>e.jsxs(i,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["NIK",e.jsx(f,{className:"ml-2 h-4 w-4"})]}),cell:({row:t})=>{const r=t.getValue("nik");return r?e.jsx("span",{children:r}):e.jsx("span",{className:"text-muted-foreground text-sm italic",children:"-"})}},{accessorKey:"name",header:({column:t})=>e.jsxs(i,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Nama",e.jsx(f,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"email",header:"Email"},{accessorKey:"role",header:"Role",cell:({row:t})=>{const r=t.getValue("role");return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Z(r)}`,children:r})}},{accessorKey:"created_at",header:"Tanggal Dibuat"},{id:"actions",cell:({row:t})=>{const r=t.original,c=()=>{o.get(`/users/${r.id}/edit`)};return e.jsxs(T,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(i,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Buka menu"}),e.jsx(J,{className:"h-4 w-4"})]})}),e.jsxs(M,{align:"end",children:[e.jsx(D,{children:"Aksi"}),e.jsxs(h,{onClick:()=>o.get(`/users/${r.id}`),children:[e.jsx(W,{className:"mr-2 h-4 w-4 text-blue-600"}),"Lihat Detail"]}),e.jsxs(h,{onClick:()=>c(),children:[e.jsx(X,{className:"mr-2 h-4 w-4 text-yellow-600"}),"Edit"]})]})]})}}];function we({users:t,filters:r}){var x;const[c,w]=l.useState([]),[N,C]=l.useState([]),[u,v]=l.useState(r.search||""),d=l.useRef(null),s=B({data:t,columns:b,getCoreRowModel:G(),getPaginationRowModel:q(),onSortingChange:w,onColumnFiltersChange:C,getFilteredRowModel:z(),getSortedRowModel:_(),initialState:{pagination:{pageSize:10}},state:{sorting:c,columnFilters:N}}),S=n=>{const a=n.target.value;v(a),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{o.get("/users",{search:a},{preserveState:!0,replace:!0})},500)},y=n=>{n.preventDefault(),o.get("/users",{search:u},{preserveState:!0})};return e.jsxs(P,{breadcrumbs:Y,children:[e.jsx(k,{title:"Kelola User"}),e.jsx(O,{}),e.jsxs("div",{className:"flex h-full flex-1 flex-col space-y-8 p-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Kelola User"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola data pengguna sistem"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("form",{onSubmit:y,className:"flex items-center gap-4 w-full md:w-1/2",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(L,{placeholder:"Cari berdasarkan nama, email, atau NIK...",value:u,onChange:S,className:"w-full pl-10"})]}),e.jsx(i,{type:"submit",variant:"outline",children:"Cari"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.length," data ditemukan"]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(K,{children:[e.jsx(I,{children:s.getHeaderGroups().map(n=>e.jsx(m,{children:n.headers.map(a=>e.jsx(E,{children:a.isPlaceholder?null:j(a.column.columnDef.header,a.getContext())},a.id))},n.id))}),e.jsx(A,{children:(x=s.getRowModel().rows)!=null&&x.length?s.getRowModel().rows.map(n=>e.jsx(m,{children:n.getVisibleCells().map(a=>e.jsx(p,{children:j(a.column.columnDef.cell,a.getContext())},a.id))},n.id)):e.jsx(m,{children:e.jsx(p,{colSpan:b.length,className:"h-24 text-center",children:"Tidak ada data"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.length," data ditemukan"]}),s.getPageCount()>1&&e.jsx(F,{children:e.jsxs(U,{children:[e.jsx(g,{children:e.jsx(H,{onClick:()=>s.previousPage(),className:s.getCanPreviousPage()?"cursor-pointer":"pointer-events-none opacity-50","aria-disabled":!s.getCanPreviousPage()})}),Array.from({length:s.getPageCount()},(n,a)=>e.jsx(g,{children:e.jsx(V,{onClick:()=>s.setPageIndex(a),isActive:s.getState().pagination.pageIndex===a,children:a+1})},a)),e.jsx(g,{children:e.jsx($,{onClick:()=>s.nextPage(),className:s.getCanNextPage()?"cursor-pointer":"pointer-events-none opacity-50","aria-disabled":!s.getCanNextPage()})})]})})]})]})]})}export{we as default};
