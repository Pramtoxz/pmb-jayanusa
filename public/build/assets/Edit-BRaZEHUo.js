import{r as g,j as a,L as P,S as N}from"./app-B5vBWpQX.js";import{A as w}from"./app-layout-Dp-DMOar.js";import{B as b}from"./button-DzljThst.js";import{I as m}from"./input-DTTei3Gu.js";import{L as r}from"./label-CaGaWzwL.js";import{S as h,a as o,b as x,c as u,d as i}from"./select-CcW2dbPb.js";import{T as I,t as f}from"./sonner-Cylg8mmS.js";import{C as _,P as L}from"./indonesia-D4BytANq.js";import"./utils-DxLRVXYz.js";import"./index-QRQAoZl_.js";import"./index-D5u2bwdo.js";import"./index-ahYbua_l.js";import"./index-BHYJOuNa.js";import"./avatar-DjJEllHW.js";import"./log-out-B4F5s-8C.js";import"./jayanusa-DK0lkaAg.js";const D=[{title:"Calon Mahasiswa",href:"/calon-mahasiswa"},{title:"Edit",href:"#"}];function Q({calonMahasiswa:j}){const[t,n]=g.useState(j),[e,y]=g.useState({}),[k,v]=g.useState(!1),[C,S]=g.useState(_[j.provinsi]||[]),c=s=>{const{name:l,value:d}=s.target;n(p=>({...p,[l]:d}))},K=s=>{n(l=>({...l,provinsi:s,kota:""})),S(_[s]||[])},F=s=>{s.preventDefault(),v(!0);const l=new FormData;Object.entries(t).forEach(([d,p])=>{p!==null&&l.append(d,p)}),l.append("_method","PUT"),N.post(`/calon-mahasiswa/${j.nik}`,l,{onSuccess:()=>{f.success("Data berhasil diperbarui"),N.get("/calon-mahasiswa")},onError:d=>{y(d),f.error("Gagal memperbarui data")},onFinish:()=>{v(!1)}})};return a.jsxs(w,{breadcrumbs:D,children:[a.jsx(P,{title:`Edit Calon Mahasiswa - ${j.nama}`}),a.jsx(I,{}),a.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:a.jsx("div",{className:"rounded-xl bg-white shadow-sm",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Edit Data Calon Mahasiswa"}),a.jsxs("form",{onSubmit:F,className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"pb-4 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Data Pribadi"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Silakan lengkapi data pribadi dengan benar"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"nik",children:"NIK"}),a.jsx(m,{id:"nik",name:"nik",type:"text",maxLength:16,pattern:"\\d*",value:t.nik,onChange:s=>{const l=s.target.value.replace(/\D/g,"");n(d=>({...d,nik:l}))},placeholder:"Masukkan 16 digit NIK",className:e.nik?"border-red-500":""}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("p",{className:"text-muted-foreground",children:"Format: 16 digit angka"}),a.jsxs("p",{className:"text-muted-foreground",children:[t.nik.length,"/16"]})]}),e.nik&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.nik})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"nama",children:"Nama Lengkap"}),a.jsx(m,{id:"nama",name:"nama",value:t.nama,onChange:c,className:e.nama?"border-red-500":""}),e.nama&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.nama})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"jenis_kelamin",children:"Jenis Kelamin"}),a.jsxs(h,{value:t.jenis_kelamin,onValueChange:s=>n(l=>({...l,jenis_kelamin:s})),children:[a.jsx(o,{className:e.jenis_kelamin?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Jenis Kelamin"})}),a.jsxs(u,{children:[a.jsx(i,{value:"L",children:"Laki-laki"}),a.jsx(i,{value:"P",children:"Perempuan"})]})]}),e.jenis_kelamin&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.jenis_kelamin})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"tempat_lahir",children:"Tempat Lahir"}),a.jsx(m,{id:"tempat_lahir",name:"tempat_lahir",value:t.tempat_lahir,onChange:c,className:e.tempat_lahir?"border-red-500":""}),e.tempat_lahir&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.tempat_lahir})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),a.jsx(m,{type:"date",id:"tanggal_lahir",name:"tanggal_lahir",value:t.tanggal_lahir,onChange:c,className:e.tanggal_lahir?"border-red-500":""}),e.tanggal_lahir&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.tanggal_lahir})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"alamat",children:"Alamat Lengkap"}),a.jsx(m,{id:"alamat",name:"alamat",value:t.alamat,onChange:c,placeholder:"Masukkan alamat lengkap",className:e.alamat?"border-red-500":""}),e.alamat&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.alamat})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"provinsi",children:"Provinsi"}),a.jsxs(h,{value:t.provinsi,onValueChange:K,children:[a.jsx(o,{className:e.provinsi?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Provinsi"})}),a.jsx(u,{children:L.map(s=>a.jsx(i,{value:s,children:s},s))})]}),e.provinsi&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.provinsi})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"kota",children:"Kota/Kabupaten"}),a.jsxs(h,{value:t.kota,onValueChange:s=>n(l=>({...l,kota:s})),disabled:!t.provinsi,children:[a.jsx(o,{className:e.kota?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Kota/Kabupaten"})}),a.jsx(u,{children:C.map(s=>a.jsx(i,{value:s,children:s},s))})]}),e.kota&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.kota})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"kecamatan",children:"Kecamatan"}),a.jsx(m,{id:"kecamatan",name:"kecamatan",value:t.kecamatan,onChange:c,className:e.kecamatan?"border-red-500":""}),e.kecamatan&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.kecamatan})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"kelurahan",children:"Kelurahan"}),a.jsx(m,{id:"kelurahan",name:"kelurahan",value:t.kelurahan,onChange:c,className:e.kelurahan?"border-red-500":""}),e.kelurahan&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.kelurahan})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"agama",children:"Agama"}),a.jsxs(h,{value:t.agama,onValueChange:s=>n(l=>({...l,agama:s})),children:[a.jsx(o,{className:e.agama?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Agama"})}),a.jsxs(u,{children:[a.jsx(i,{value:"Islam",children:"Islam"}),a.jsx(i,{value:"Kristen",children:"Kristen"}),a.jsx(i,{value:"Katolik",children:"Katolik"}),a.jsx(i,{value:"Hindu",children:"Hindu"}),a.jsx(i,{value:"Buddha",children:"Buddha"}),a.jsx(i,{value:"Konghucu",children:"Konghucu"})]})]}),e.agama&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.agama})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"no_hp",children:"No HP"}),a.jsx(m,{type:"tel",id:"no_hp",name:"no_hp",pattern:"\\d*",value:t.no_hp,onChange:s=>{const l=s.target.value.replace(/\D/g,"");n(d=>({...d,no_hp:l}))},placeholder:"Contoh: 08123456789",className:e.no_hp?"border-red-500":""}),e.no_hp&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.no_hp})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"asal_sekolah",children:"Asal Sekolah"}),a.jsx(m,{id:"asal_sekolah",name:"asal_sekolah",value:t.asal_sekolah,onChange:c,className:e.asal_sekolah?"border-red-500":""}),e.asal_sekolah&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.asal_sekolah})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"tahun_lulus",children:"Tahun Lulus"}),a.jsx(m,{type:"number",id:"tahun_lulus",name:"tahun_lulus",min:"1900",max:new Date().getFullYear(),value:t.tahun_lulus,onChange:c,placeholder:"Contoh: 2023",className:e.tahun_lulus?"border-red-500":""}),e.tahun_lulus&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.tahun_lulus})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"program_studi",children:"Program Studi"}),a.jsxs(h,{value:t.program_studi,onValueChange:s=>n(l=>({...l,program_studi:s})),children:[a.jsx(o,{className:e.program_studi?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Program Studi"})}),a.jsxs(u,{children:[a.jsx(i,{value:"MI",children:"D3-Manajemen Informatika"}),a.jsx(i,{value:"SI",children:"S1-Sistem Informasi"}),a.jsx(i,{value:"SK",children:"S1-Sistem Komputer"})]})]}),e.program_studi&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.program_studi})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"beasiswa",children:"Status Beasiswa"}),a.jsxs(h,{value:t.beasiswa,onValueChange:s=>{n(l=>({...l,beasiswa:s,kelas:s==="iya"?null:l.kelas}))},children:[a.jsx(o,{className:e.beasiswa?"border-red-500":"",children:a.jsx(x,{placeholder:"Penerima Beasiswa KIP-Kuliah (Isi Tidak Jika Tidak Penerima)"})}),a.jsxs(u,{children:[a.jsx(i,{value:"iya",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Ya (KIP-Kuliah)"})})}),a.jsx(i,{value:"tidak",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Tidak"})})})]})]}),e.beasiswa&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.beasiswa})]}),t.beasiswa==="tidak"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"kelas",children:"Kelas"}),a.jsxs(h,{value:t.kelas||"",onValueChange:s=>n(l=>({...l,kelas:s})),children:[a.jsx(o,{className:e.kelas?"border-red-500":"",children:a.jsx(x,{placeholder:"Pilih Kelas"})}),a.jsxs(u,{children:[a.jsx(i,{value:"reguler",children:"Non Kerja"}),a.jsx(i,{value:"kerja",children:"Kerja"})]})]}),e.kelas&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.kelas})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{htmlFor:"foto",children:"Foto"}),typeof t.foto=="string"&&t.foto&&a.jsxs("div",{className:"mb-2",children:[a.jsx("img",{src:t.foto,alt:"Foto saat ini",className:"w-32 h-32 object-cover rounded-lg"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Foto saat ini"})]}),a.jsx(m,{type:"file",id:"foto",name:"foto",onChange:s=>{const l=s.target.files;l&&l.length>0&&n(d=>({...d,foto:l[0]}))},accept:"image/*",className:e.foto?"border-red-500":""}),e.foto&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:e.foto})]})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(b,{type:"button",variant:"outline",onClick:()=>N.get("/calon-mahasiswa"),children:"Batal"}),a.jsx(b,{type:"submit",disabled:k,children:k?"Menyimpan...":"Simpan Perubahan"})]})]})]})})})]})}export{Q as default};
